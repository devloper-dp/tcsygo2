I want you to generate a complete production-grade full-stack microservices-based system for a carpooling app called TCSYGO.
TCSYGO is a BlaBlaCar + Rapido‚Äìstyle ride-sharing platform (car-only, no bikes) built on:

React Native (Expo) mobile app

React (Vite) web app

Supabase as the cloud backend

Multiple microservices separated by domain

Razorpay for payments

Mapbox or Google Maps for maps, routing, and real-time tracking

Realtime location updates using Supabase Realtime or event streams

üåê SYSTEM ARCHITECTURE REQUIREMENTS

You must create a full microservices architecture:

1. Authentication Service

Uses Supabase Auth internally

Handles login, OTP auth, roles (Driver, Passenger)

No schema output

Microservice with isolated logic

2. User Profile Service

Stores user profile data

Manages updates, photos, verification status

Connects with Supabase storage and auth

Includes role switching logic

3. Driver Service

Driver onboarding + verification workflow

Car details, license uploads, verification

Driver availability (Online/Offline)

Driver document management

Separate service from user profiles

4. Trip Service

Driver creates trips:

Pickup

Drop

Route

Distance & ETA

Pricing

Available seats

Handles trip lifecycle:

Upcoming ‚Üí Ongoing ‚Üí Completed ‚Üí Cancelled

High scalability required

5. Booking Service

Passengers book seats

Driver approves or auto-approve mode

Updates seat availability

Sends events to other services

Handles booking lifecycle

6. Payments Service

Razorpay integration

Order creation

Payment verification

Refund workflow

Driver earnings calculation

Platform fee processing

Emits payment events for trip and booking services

7. Realtime Location Service

Live GPS tracking for drivers

Broadcast to passengers

Real-time map updates

Uses:

Supabase Realtime

OR event streams

Smooth location animation

Supports multiple vehicles concurrently

8. Notification Service

Cross-platform notifications for:

Booking confirmed

Driver arrived

Trip started

Trip ended

Payments

Push notifications for mobile (Expo Notifications)

Web notifications for web app

9. Rating & Review Service

Driver ‚Üí Passenger ratings

Passenger ‚Üí Driver ratings

Review storage and scoring logic

10. Analytics / Admin Dashboard Service

Admin UI (React Web App)

Monitor:

Trips

Bookings

Payments

Driver verification

User activity

High-level analytics

Manage fraud, disputes

üì± MOBILE APP (React Native + Expo) REQUIREMENTS

The app must include full UI + navigation + logic:

Onboarding

OTP login

Map-based home screen

Search ride flow

Create trip (for drivers)

Trip details

Booking flow

Payment flow

Real-time driver tracking

Profile management

Trip sharing

SOS button

Notification handling

Rating interface

Mobile must support Android & iOS.

üíª WEB APP (React + Vite) REQUIREMENTS

Two interfaces:

1. Passenger/Driver Web Portal

View trips

Book trips

Create trips (drivers)

Real-time tracking

Profile management

Payments

2. Admin Dashboard

Driver verification

Payment logs

Bookings monitoring

Trip analytics

Platform metrics

üß© TECHNICAL REQUIREMENTS
Architecture

You must build a complete microservices architecture without exposing database schema or API endpoints.

Microservices should include:

Separate folders

Event-driven communication

Internal module boundaries

Auth guards per service

Repository & controller layers

Service-level business logic

Shared utils

Communication Between Services

Use one or more patterns:

Event bus

Publish‚Äìsubscribe

Supabase Realtime channels

Webhooks between services

Map Integration

Both mobile & web must support:

Map view

Autocomplete search

Route drawing

Distance & time calculation

Live location markers

Live driver tracking

Pickup & drop markers

Payments

Payments service must be fully implemented using Razorpay including:

Order creation

Checkout flow

Success & failure handling

Refund process

Earnings calculation for drivers

Payout ready logic (no automation needed)

Security

Role-based access control

Private microservice-level routes

Environment variable-based secrets

Secure Supabase rules (without printing them)

üì¶ PROJECT OUTPUT: WHAT YOU MUST GENERATE

You must output the full system, including:

Complete React Native app project

Complete React web project

All microservices in separate folders

Shared libraries

Event bus / message broker setup

Realtime tracking system

Notification integration

Payment logic

Full navigation & UI pages

All hooks, contexts, stores

Internal Supabase queries

Configuration files

Environment variable structure

Services orchestration

No placeholders or TODOs ‚Äî generate fully working code internally.